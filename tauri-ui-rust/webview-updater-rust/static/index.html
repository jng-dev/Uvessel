<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Updating</title>
    <style>
      :root {
        color-scheme: light;
        font-family: "Space Grotesk", "Segoe UI", sans-serif;
      }
      html,
      body {
        margin: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #f1f5f9;
        color: #1a2433;
      }
      .shell {
        height: 100%;
        display: grid;
        place-items: center;
        padding: 16px;
        box-sizing: border-box;
        background: linear-gradient(160deg, #f4f7fa, #e8eef4);
      }
      .card {
        width: 100%;
        height: 100%;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.9);
        box-shadow:
          0 14px 30px rgba(18, 24, 40, 0.14),
          0 0 0 1px rgba(104, 140, 255, 0.08);
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 14px;
        align-items: center;
        padding: 18px 20px;
        box-sizing: border-box;
      }
      .icon {
        width: 36px;
        height: 36px;
        border-radius: 12px;
        background: linear-gradient(140deg, #1b2533, #2a3545);
        display: grid;
        place-items: center;
        color: #fff;
        font-weight: 600;
      }
      .icon img {
        width: 26px;
        height: 26px;
        object-fit: contain;
      }
      .title {
        font-size: 0.95rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #6c7686;
        margin: 0 0 4px;
      }
      .name {
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0;
      }
      .row {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-top: 10px;
      }
      .spinner {
        width: 18px;
        height: 18px;
        border: 2px solid rgba(52, 73, 94, 0.2);
        border-top-color: #6a8cff;
        border-radius: 999px;
        animation: spin 1s linear infinite;
      }
      .status {
        font-size: 0.9rem;
        color: #3b4657;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <div class="card">
        <div class="icon" id="icon">
          <span id="initial">U</span>
        </div>
        <div>
          <p class="title">Updating</p>
          <p class="name" id="name">New release</p>
          <div class="row">
            <span class="spinner"></span>
            <span class="status">Downloading updateâ€¦</span>
          </div>
        </div>
      </div>
    </div>
    <script>
      const { core } = window.__TAURI__;
      core
        .invoke("get_update_ui_info")
        .then((info) => {
          if (info?.name) {
            document.getElementById("name").textContent = info.name;
            document.getElementById("initial").textContent =
              info.name.trim().charAt(0).toUpperCase() || "U";
          }
          if (info?.icon_path) {
            const img = document.createElement("img");
            img.src = core.convertFileSrc(info.icon_path);
            const icon = document.getElementById("icon");
            icon.textContent = "";
            icon.appendChild(img);
          }
        })
        .catch(() => {});
    </script>
  </body>
</html>
